<section class="page page--calendar">
  <div class="page__container">
    <div class="calendar__title-section">
      <h1>Calendario</h1>
      <p class="calendar__description">Aquí podrás gestionar cuando has consumido los medicamentos</p>
    </div>

    <app-calendar (daySelected)="onCalendarDaySelected($event)"></app-calendar>


    <div class="calendar__medicines-list">
      <!-- Lista de medicamentos o mensaje vacío -->
      <div *ngIf="!loading && medicineGroups.length > 0; else noMedicines" class="medicines__list">
        <!-- Mostrar grupos de medicamentos por hora -->
        <div *ngFor="let group of medicineGroups" class="medicines__time-group">
          <!-- Hora como encabezado -->
          <div class="medicines__time-header">{{ group.time }}</div>
          
          <!-- Medicamentos en esta hora -->
          <div class="medicines__group-items">
            <app-medicine-card-calendar 
              *ngFor="let medicine of group.medicines"
              [medicine]="medicine"
              [displayTime]="''"
              [isExpired]="isExpired(medicine)"
              [isExpiring]="isExpiring(medicine)"
              (medicineEdit)="editMedicine($event)"
              (medicineDelete)="deleteMedicine($event)"
              (medicineSelected)="onMedicineSelected($event)">
            </app-medicine-card-calendar>
          </div>
        </div>
      </div>

      <!-- Sin medicamentos -->
      <ng-template #noMedicines>
        <p class="medicines__empty-message">No se han creado medicamentos todavia</p>
      </ng-template>
    </div>
  </div>
</section>

