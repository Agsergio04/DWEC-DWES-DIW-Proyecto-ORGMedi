<section class="page page--profile" *ngIf="formInitialized && form">
  <form class="page__container" [formGroup]="form">
    <!-- Encabezado -->
    <div class="profile__title-section">
      <h1>Perfil</h1>
      <p class="profile__description">Aqui podras gestionar cuando has consumido los medicamentos</p>
    </div>

    <!-- Sección: Nombre de Usuario -->
    <div class="profile__form-section">
      <h2 class="profile__section-title">Nombre de Usuario</h2>
      <p class="profile__section-subtitle">Aqui puedes ver el nombre de usuario</p>
      
      <p class="profile__input-label">Introduce un nuevo nombre de usuario para cambiarlo:</p>
      <app-data-input
        formControlName="username"
        placeholder="Usuario123"
        icon="/Icono Usuario.svg"
        type="text"
      ></app-data-input>

      <app-button
        variant="primary"
        [width]="'100%'"
        [padding]="'12px 24px'"
        [fontSize]="'1rem'"
        (click)="changeUsername()"
        [disabled]="!form.get('username')?.value"
      >
        Cambiar el nombre de usuario
      </app-button>
    </div>

    <!-- Sección: Contraseña -->
    <div class="profile__form-section">
      <h2 class="profile__section-title">Contraseña</h2>
      <p class="profile__section-subtitle">Introduce la contraseña actual y luego la nueva contraseña para poder cambiarla.</p>
      
      <p class="profile__input-label">Introduce la contraseña actual:</p>
      <app-data-input
        formControlName="currentPassword"
        placeholder="Introduce la contraseña"
        icon="/Icono contraseña.svg"
        type="password"
      ></app-data-input>

      <p class="profile__input-label">Introduce la contraseña a la que se quiere cambiar:</p>
      <app-data-input
        formControlName="newPassword"
        placeholder="Introduce la nueva contraseña"
        icon="/Icono contraseña.svg"
        type="password"
      ></app-data-input>

      <app-button
        variant="primary"
        [width]="'100%'"
        [padding]="'12px 24px'"
        [fontSize]="'1rem'"
        (click)="changePassword()"
        [disabled]="!form.get('currentPassword')?.value || !form.get('newPassword')?.value"
      >
        Cambiar la contraseña
      </app-button>
    </div>

    <!-- Botón Cerrar Sesión -->
    <app-button
      variant="primary"
      [width]="'100%'"
      [padding]="'12px 24px'"
      [fontSize]="'1rem'"
      (click)="logout()"
      class="profile__logout-btn"
    >
      Cerrar sesion
    </app-button>
  </form>
</section>

