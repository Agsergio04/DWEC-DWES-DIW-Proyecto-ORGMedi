<article class="medicine-card" [class.medicine-card--expired]="isExpired" [class.medicine-card--expiring]="isExpiring">
  <!-- HEADER Section con fondo rosa -->
  <header class="medicine-card__header">
    <!-- Icono de píldora -->
    <figure class="medicine-card__pill-icon" aria-hidden="true">
      <svg width="56" height="56" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M6.19589 6.19589L11.8041 11.8041M7.79824 15.81L15.81 7.79824C16.1843 7.43136 16.4823 6.99391 16.6865 6.51117C16.8908 6.02844 16.9973 5.51 16.9999 4.98584C17.0026 4.46168 16.9013 3.94219 16.7019 3.45742C16.5026 2.97264 16.2091 2.5322 15.8384 2.16156C15.4678 1.79092 15.0274 1.49743 14.5426 1.29806C14.0578 1.09869 13.5383 0.997403 13.0142 1.00005C12.49 1.0027 11.9716 1.10923 11.4888 1.31348C11.0061 1.51774 10.5686 1.81566 10.2018 2.19003L2.19003 10.2018C1.81566 10.5686 1.51774 11.0061 1.31348 11.4888C1.10923 11.9716 1.0027 12.49 1.00005 13.0142C0.997403 13.5383 1.09869 14.0578 1.29806 14.5426C1.49743 15.0274 1.79092 15.4678 2.16156 15.8384C2.5322 16.2091 2.97264 16.5026 3.45742 16.7019C3.94219 16.9013 4.46168 17.0026 4.98584 16.9999C5.51 16.9973 6.02844 16.8908 6.51117 16.6865C6.99391 16.4823 7.43136 16.1843 7.79824 15.81Z" 
          [attr.stroke]="getPillColor()" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </figure>
    
    <!-- Título del medicamento -->
    <h2 class="medicine-card__title" [style.color]="getPillColor()">{{ medicine.nombre }}</h2>
    
    <!-- Botones de acción -->
    <div class="medicine-card__actions" role="group" aria-label="Acciones del medicamento">
      <button class="medicine-card__btn" aria-label="Eliminar medicamento {{ medicine.nombre }}" (click)="onDelete()" type="button">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
      <button class="medicine-card__btn" aria-label="Editar medicamento {{ medicine.nombre }}" (click)="onEdit()" type="button">
        <img src="/Icono Editar.svg" alt="" width="24" height="24" />
      </button>
    </div>
  </header>

  <!-- CONTENT Section con fondo blanco -->
  <section class="medicine-card__content" aria-label="Detalles del medicamento">
    <!-- Grid 2x2 de información -->
    <div class="medicine-card__info-grid">
      <!-- Fila 1 -->
      <div class="medicine-card__info-item">
        <div class="medicine-card__icon-wrapper medicine-card__icon-wrapper--bordered" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="9" width="18" height="12" rx="2"/>
            <path d="M9 9V6a3 3 0 0 1 6 0v3"/>
          </svg>
        </div>
        <p class="medicine-card__text">
          <span class="medicine-card__label">Cantidad:</span>
          <span class="medicine-card__value">{{ getDosageLabel() }}</span>
        </p>
      </div>

      <div class="medicine-card__info-item">
        <div class="medicine-card__icon-wrapper" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
        </div>
        <p class="medicine-card__text">
          <span class="medicine-card__label">Frecuencia:</span>
          <span class="medicine-card__value">{{ getFrequencyLabel() }}</span>
        </p>
      </div>

      <!-- Fila 2 -->
      <div class="medicine-card__info-item">
        <div class="medicine-card__icon-wrapper" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="18" rx="2"/>
            <path d="M16 2v4M8 2v4M3 10h18"/>
          </svg>
        </div>
        <p class="medicine-card__text">
          <span class="medicine-card__label">Fecha Inicio:</span>
          <time class="medicine-card__value">{{ medicine.fechaInicio }}</time>
        </p>
      </div>

      <div class="medicine-card__info-item">
        <div class="medicine-card__icon-wrapper" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="18" rx="2"/>
            <path d="M16 2v4M8 2v4M3 10h18"/>
          </svg>
        </div>
        <p class="medicine-card__text">
          <span class="medicine-card__label">Fecha Fin:</span>
          <time class="medicine-card__value">{{ medicine.fechaFin || '-' }}</time>
        </p>
      </div>
    </div>
  </section>
</article>
